<!DOCTYPE html>
<html>
    <head>
        <title>Show case</title>
    </head>
    <body>
        <h1>
            Showcase for performance & working test
        </h1>

        <button onclick="updateResult('result')">Result 1</button>
        <button onclick="updateResult('result2')">Result 2</button>
        <button onclick="updateResult('result3')">Result 3</button>
        <button onclick="updateResult('result4')">Result 4</button>
        <button onclick="updateResult('result5')">Result 5</button>
        <pre id="result"></pre>
        <br><br>
        <hr>
        <div id="sources">

        </div>
        <pre id="sourcePanel">

        </pre>
        <br><br>
        <hr>
        Go to <a href="https://github.com/Readiz/CodingNote">GitHub Repo</a>
        <script>
            function getRandomArbitrary(min, max) {
                return Math.random() * (max - min) + min;
            }
            async function updateResult(filename) {
                const res = await fetch(`./output/${filename}.log?` + getRandomArbitrary(0, 1000000));
                const text = escape(await res.text());
                document.getElementById('result').innerHTML = text;
            }
            async function getSourceFile(filename) {
                const res = await fetch(`${filename}?` + getRandomArbitrary(0, 1000000));
                const text = escape(await res.text());
                document.getElementById('sourcePanel').innerHTML = text;
            }
            async function getSources() {
                const res = await fetch(`./output/sourceFileList.json?` + getRandomArbitrary(0, 1000000));
                const arr = await res.json();
                for (const item of arr) {
                    const name = String(item).substr(2).split('.cpp')[0];
                    const button = `<button onclick="getSourceFile('${item}')">${name}</button>`;
                    document.getElementById('sources').innerHTML += button;
                }
            }
            (async() => {
                await updateResult('result');
                await getSources();
            })();
        </script>
    </body>
</html>
